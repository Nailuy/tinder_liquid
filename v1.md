# Project Specification: Liquid Narrative - The HyperCore Experience

## 1. Context & Goal
We are building a **High-Fidelity Interactive WebGL Game** for the DeFi protocol **Liquid** (tryliquid.xyz).
**Concept:** "Tinder for Crypto Narratives."
**Core Loop:** Users confront AI-generated market scenarios -> Swipe LONG or SHORT in seconds -> Experience a visceral visual reaction (Euphoria or Liquidation).

**Target Audience:** Pro-traders, degens, whales.
**Vibe:** Cyberpunk, High-Frequency Trading (HFT), Institutional Grade, "Liquid" Physics.

## 2. Technology Stack (The "WOW" Factor)
To achieve a premium feel, we are NOT using basic HTML/CSS. The solution must utilize:
* **Three.js (WebGL):** For a living, breathing liquid particle background that reacts to mouse movement.
* **GSAP (GreenSock Animation Platform):** For butter-smooth UI transitions and "glitch" effects.
* **Google Gemini API (Client-side):** For generating dynamic, infinite scenarios.

## 3. Design System & Assets
* **Colors:** Deep Navy Void (`#020412`), Electric Cyan (`#00F0FF`), Matrix Green (`#00FFA3`), Laser Red (`#FF2A6D`).
* **Typography:** 'Inter' (UI) and 'JetBrains Mono' (Data).
* **Logos:** Use `logo.svg` from the `/SVG` folder. Apply a neon glow filter.
* **Glassmorphism 2.0:** Ultra-thin borders, high blur, noise textures.

## 4. Viral Mechanics
1.  **Share Your Rekt:** Custom Twitter intents generated dynamically based on PNL.
2.  **Referral Loop:** "Trade on Real Liquid" CTA buttons.

## 5. Implementation Code (Production Ready)
**INSTRUCTION FOR AGENT:** Use the code below. It includes the complete logic with Three.js and GSAP embedded. Do not simplify it.

### **CODE BLOCK (HTML/CSS/JS + WebGL)**

```html
<div id="liquid-experience">
    <canvas id="webgl-canvas"></canvas>
    
    <div class="noise-overlay"></div>

    <div class="ui-container">
        <header>
            <div class="brand">
                <img src="./SVG/logo.svg" alt="LIQUID" class="brand-logo" onerror="this.style.display='none'">
                <span class="brand-name">LIQUID <span class="tag">AI-BETA</span></span>
            </div>
            <div class="hud-stats">
                <div class="hud-item">
                    <span class="label">STREAK</span>
                    <span class="value" id="streak-val">0</span>
                </div>
                <div class="hud-item">
                    <span class="label">PNL</span>
                    <span class="value" id="pnl-val">$0</span>
                </div>
            </div>
        </header>

        <main class="game-stage">
            <div id="game-card" class="cyber-card">
                <div class="card-inner">
                    <div class="timer-line"><div id="timer-fill"></div></div>
                    <div class="meta-row">
                        <span class="live-badge">‚óè LIVE FEED</span>
                        <span class="source-id">ID: <span id="scenario-id">LOADING...</span></span>
                    </div>
                    
                    <h2 id="headline" class="glitch-text">INITIALIZING NEURAL LINK...</h2>
                    
                    <div class="status-overlay hidden" id="overlay">
                        <h1 id="res-title">LIQUIDATED</h1>
                        <p id="res-desc">Protocol seized your collateral.</p>
                        <div class="btn-group">
                            <button class="action-btn retry" onclick="resetGame()">NEXT TRADE</button>
                            <button class="action-btn share" onclick="shareResult()">SHARE X</button>
                        </div>
                        <a href="[https://tryliquid.xyz/](https://tryliquid.xyz/)" target="_blank" class="cta-link">TRADE REAL PERPS ‚Üó</a>
                    </div>
                </div>
            </div>
        </main>

        <footer class="controls" id="controls">
            <button class="trade-btn short" onmousedown="handleInteract('SHORT')">
                <div class="btn-bg"></div>
                <span class="btn-txt">SHORT</span>
            </button>
            <button class="trade-btn long" onmousedown="handleInteract('LONG')">
                <div class="btn-bg"></div>
                <span class="btn-txt">LONG</span>
            </button>
        </footer>
    </div>
</div>

<style>
    @import url('[https://fonts.googleapis.com/css2?family=Inter:wght@400;800&family=JetBrains+Mono:wght@400;700&display=swap](https://fonts.googleapis.com/css2?family=Inter:wght@400;800&family=JetBrains+Mono:wght@400;700&display=swap)');

    :root {
        --cyan: #00F0FF;
        --green: #00FFA3;
        --red: #FF2A6D;
        --dark: #020412;
    }

    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: var(--dark); font-family: 'Inter', sans-serif; }

    #liquid-experience { position: relative; width: 100%; height: 100vh; }

    /* WebGL & FX */
    #webgl-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
    .noise-overlay {
        position: absolute; inset: 0; pointer-events: none; z-index: 1; opacity: 0.05;
        background: url('[https://grainy-gradients.vercel.app/noise.svg](https://grainy-gradients.vercel.app/noise.svg)');
    }

    /* UI Layout */
    .ui-container { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }

    header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; }
    .brand { display: flex; align-items: center; gap: 10px; color: white; font-weight: 800; font-size: 24px; letter-spacing: -1px; }
    .brand-logo { height: 32px; filter: drop-shadow(0 0 10px var(--cyan)); }
    .tag { font-size: 10px; background: var(--cyan); color: black; padding: 2px 6px; border-radius: 4px; margin-left: 5px; }

    .hud-stats { display: flex; gap: 15px; }
    .hud-item { background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); padding: 8px 12px; border-radius: 8px; text-align: right; }
    .hud-item .label { display: block; font-size: 9px; color: #94a3b8; font-family: 'JetBrains Mono'; }
    .hud-item .value { font-size: 14px; color: white; font-family: 'JetBrains Mono'; font-weight: 700; }

    .game-stage { flex: 1; display: flex; align-items: center; justify-content: center; perspective: 1000px; }

    /* Cyber Card */
    .cyber-card {
        width: 100%; max-width: 420px; min-height: 400px;
        background: rgba(10, 15, 30, 0.65);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 240, 255, 0.2);
        border-radius: 24px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.6);
        transform-style: preserve-3d;
        position: relative;
        overflow: hidden;
    }

    .card-inner { padding: 30px; height: 100%; display: flex; flex-direction: column; position: relative; z-index: 2; }

    .timer-line { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: rgba(255,255,255,0.1); }
    #timer-fill { width: 100%; height: 100%; background: var(--cyan); box-shadow: 0 0 10px var(--cyan); }

    .meta-row { display: flex; justify-content: space-between; font-family: 'JetBrains Mono'; font-size: 11px; color: rgba(255,255,255,0.5); margin-bottom: 30px; }
    .live-badge { color: var(--red); animation: pulse 2s infinite; }

    #headline { font-size: 28px; line-height: 1.3; font-weight: 800; color: white; margin: 0; min-height: 120px; text-shadow: 0 0 20px rgba(0,0,0,0.5); }

    /* Controls */
    .controls { display: flex; gap: 20px; justify-content: center; padding-top: 20px; width: 100%; max-width: 420px; margin: 0 auto; }
    
    .trade-btn {
        flex: 1; position: relative; height: 64px; border: none; background: transparent; cursor: pointer;
        font-family: 'JetBrains Mono'; font-weight: 800; font-size: 20px; color: var(--dark);
        clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        transition: transform 0.1s;
    }
    .trade-btn:active { transform: scale(0.95); }
    .trade-btn .btn-bg { position: absolute; inset: 0; z-index: -1; transition: 0.3s; }
    
    .short .btn-bg { background: var(--red); }
    .short:hover .btn-bg { box-shadow: 0 0 30px var(--red); }
    
    .long .btn-bg { background: var(--green); }
    .long:hover .btn-bg { box-shadow: 0 0 30px var(--green); }

    /* Overlay */
    .status-overlay {
        position: absolute; inset: 0; background: rgba(2,4,18,0.95); z-index: 20;
        display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;
        padding: 30px; opacity: 0; pointer-events: none; transition: opacity 0.3s;
    }
    .status-overlay:not(.hidden) { opacity: 1; pointer-events: all; }
    
    #res-title { font-size: 48px; font-weight: 900; margin: 0; letter-spacing: -2px; }
    .win-color { color: var(--green); text-shadow: 0 0 30px var(--green); }
    .lose-color { color: var(--red); text-shadow: 0 0 30px var(--red); }
    
    .btn-group { display: flex; gap: 10px; width: 100%; margin-top: 30px; }
    .action-btn { flex: 1; padding: 15px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; cursor: pointer; font-family: 'JetBrains Mono'; font-weight: 700; transition: 0.2s; }
    .action-btn:hover { background: white; color: black; }
    
    .cta-link { margin-top: 20px; color: var(--cyan); text-decoration: none; border-bottom: 1px dashed var(--cyan); font-size: 12px; font-family: 'JetBrains Mono'; }

    @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
</style>

<script src="[https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js](https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js)"></script>
<script src="[https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js](https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js)"></script>

<script type="module">
    import { GoogleGenerativeAI } from "[https://esm.run/@google/generative-ai](https://esm.run/@google/generative-ai)";

    // --- 1. THREE.JS BACKGROUND (The "Liquid" Effect) ---
    const canvas = document.querySelector('#webgl-canvas');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
    
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

    // Particles
    const particlesGeometry = new THREE.BufferGeometry();
    const count = 3000;
    const posArray = new Float32Array(count * 3);
    
    for(let i = 0; i < count * 3; i++) {
        posArray[i] = (Math.random() - 0.5) * 15; // Spread
    }
    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
    
    const material = new THREE.PointsMaterial({
        size: 0.02,
        color: 0x00F0FF,
        transparent: true,
        opacity: 0.8
    });
    
    const particlesMesh = new THREE.Points(particlesGeometry, material);
    scene.add(particlesMesh);
    camera.position.z = 3;

    // Animation Loop
    let mouseX = 0;
    let mouseY = 0;
    
    document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX / window.innerWidth - 0.5;
        mouseY = e.clientY / window.innerHeight - 0.5;
    });

    const clock = new THREE.Clock();

    function animate() {
        const elapsedTime = clock.getElapsedTime();
        
        // Rotate entire system slightly
        particlesMesh.rotation.y = elapsedTime * 0.05;
        particlesMesh.rotation.x = mouseY * 0.5;
        particlesMesh.rotation.y += mouseX * 0.5;

        // Wave effect
        particlesMesh.position.y = Math.sin(elapsedTime * 0.5) * 0.2;

        renderer.render(scene, camera);
        requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    // --- 2. GAME LOGIC ---
    const API_KEY = "YOUR_GEMINI_KEY_HERE";
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash"});

    let gameState = { scenario: null, streak: 0, pnl: 0, timer: null };

    const els = {
        headline: document.getElementById('headline'),
        timerFill: document.getElementById('timer-fill'),
        overlay: document.getElementById('overlay'),
        resTitle: document.getElementById('res-title'),
        resDesc: document.getElementById('res-desc'),
        streak: document.getElementById('streak-val'),
        pnl: document.getElementById('pnl-val'),
        controls: document.getElementById('controls'),
        card: document.getElementById('game-card')
    };

    window.resetGame = async () => {
        els.overlay.classList.add('hidden');
        gsap.to(els.controls, { opacity: 1, pointerEvents: 'all' });
        
        els.headline.innerText = "ACCESSING MEMPOOL...";
        els.headline.style.color = "white";
        document.getElementById('scenario-id').innerText = Math.floor(Math.random()*9999);
        
        try {
            const prompt = `Generate JSON. Role: Crypto Market Maker.
            Scenario: 1 sentence news (Ukrainian). Real tokens (BTC/ETH/Liquid).
            Output: {"headline": "...", "move": "LONG"|"SHORT", "roi": "e.g. +400%", "msg": "Sarcastic explanation"}`;
            
            const res = await model.generateContent(prompt);
            const text = res.response.text().replace(/```json|```/g, '').trim();
            gameState.scenario = JSON.parse(text);
            
            // Text Glitch Effect Entry
            els.headline.innerText = gameState.scenario.headline;
            gsap.from(els.headline, { duration: 0.5, opacity: 0, x: -20, ease: "power2.out" });
            
            startTimer();
        } catch(e) {
            console.error(e);
            setTimeout(resetGame, 1000);
        }
    };

    function startTimer() {
        let t = 20;
        clearInterval(gameState.timer);
        gameState.timer = setInterval(() => {
            t--;
            gsap.to(els.timerFill, { width: (t/20)*100 + "%" });
            if(t<=0) endGame(false, "TIMEOUT");
        }, 1000);
    }

    window.handleInteract = (choice) => {
        clearInterval(gameState.timer);
        // Card Swipe Animation
        const dir = choice === 'LONG' ? 100 : -100;
        const rot = choice === 'LONG' ? 10 : -10;
        
        gsap.to(els.card, { 
            x: dir, 
            rotation: rot, 
            duration: 0.2, 
            yoyo: true, 
            repeat: 1,
            onComplete: () => {
                endGame(choice === gameState.scenario.move);
            } 
        });
    };

    function endGame(isWin, reason) {
        gsap.to(els.controls, { opacity: 0.2, pointerEvents: 'none' });
        
        if(isWin) {
            gameState.streak++;
            gameState.pnl += Math.floor(Math.random() * 5000) + 1000;
            els.resTitle.innerText = "PROFIT " + gameState.scenario.roi;
            els.resTitle.className = "win-color";
            
            // Particle Explosion (Simple color shift)
            material.color.setHex(0x00FFA3); 
        } else {
            gameState.streak = 0;
            gameState.pnl -= 2000;
            els.resTitle.innerText = reason || "LIQUIDATED";
            els.resTitle.className = "lose-color";
            
            // Particle Turn Red
            material.color.setHex(0xFF2A6D);
        }
        
        els.resDesc.innerText = gameState.scenario.msg;
        els.streak.innerText = gameState.streak;
        els.pnl.innerText = "$" + gameState.pnl;

        setTimeout(() => {
            els.overlay.classList.remove('hidden');
            // Reset particle color slowly
            gsap.delayedCall(2, () => material.color.setHex(0x00F0FF));
        }, 500);
    }

    window.shareResult = () => {
        const txt = `My PNL: $${gameState.pnl} on Liquid Narrative. Can you beat the AI? üåä @liquidtrading`;
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(txt)}`, '_blank');
    };

    // Init
    resetGame();
</script>